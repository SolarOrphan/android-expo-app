{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import TextInput from\"react-native-web/dist/exports/TextInput\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import Modal from\"react-native-web/dist/exports/Modal\";import{React,useState}from\"react\";import AsyncStorage from\"@react-native-async-storage/async-storage\";import Loading from\"../components/Loading\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AddCollection(_ref){var showmodal=_ref.showmodal,changeshowmodal=_ref.changeshowmodal,load_collections=_ref.load_collections,navigation=_ref.navigation;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],name_chg=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),desc=_useState4[0],desc_chg=_useState4[1];var storage_userid=function _callee(){return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"@user_id\"));case 3:return _context.abrupt(\"return\",_context.sent);case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.log(_context.t0);return _context.abrupt(\"return\",null);case 10:case\"end\":return _context.stop();}}},null,null,[[0,6]],Promise);};var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),load=_useState6[0],load_chg=_useState6[1];var add_coll_submit=function _callee4(name,desc,navigation){return _regeneratorRuntime.async(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:load_chg(true);storage_userid().then(function _callee3(user_id){return _regeneratorRuntime.async(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _regeneratorRuntime.awrap(fetch(\"http://192.168.0.158:3000/collection/\",{method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify({name:name,description:desc,id:user_id})}).then(function _callee2(response){var res;return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regeneratorRuntime.awrap(response.json());case 2:res=_context2.sent;if(res.message==\"Success\"){name_chg(\"\");desc_chg(\"\");load_collections(res.data.collection_ids);changeshowmodal(false);load_chg(false);}else if(res.message==\"Fail\"){console.log(\"Fail\");load_chg(false);}case 4:case\"end\":return _context2.stop();}}},null,null,null,Promise);}).catch(function(error){console.error(error);}));case 2:case\"end\":return _context3.stop();}}},null,null,null,Promise);});navigation.navigate(\"Dashboard\");case 3:case\"end\":return _context4.stop();}}},null,null,null,Promise);};return _jsxs(Modal,{style:styles.modalcontainer,animationType:\"slide\",visible:showmodal,children:[load==true?_jsx(Loading,{}):null,_jsxs(View,{style:styles.modalform,children:[_jsx(Text,{style:styles.header,children:\"Add Collection\"}),_jsx(TextInput,{style:styles.text_box,placeholder:\"Collection name\",defaultValue:name,onChangeText:function onChangeText(new_name){return name_chg(new_name);}}),_jsx(TextInput,{style:styles.text_box,defaultValue:desc,onChangeText:function onChangeText(new_desc){return desc_chg(new_desc);},placeholder:\"Collection description\"}),_jsxs(View,{style:styles.btncontainer,children:[_jsx(TouchableOpacity,{style:styles.Sign_in_btn,onPress:function onPress(){return changeshowmodal(false);},children:_jsx(Text,{style:styles.btn_label,children:\"Cancel\"})}),_jsx(TouchableOpacity,{style:styles.Sign_in_btn,onPress:function onPress(){return add_coll_submit(name,desc,navigation);},children:_jsx(Text,{style:styles.btn_label,children:\"Add\"})})]})]})]});}var styles=StyleSheet.create({modalcontainer:{},modalform:{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",marginTop:250},header:{fontSize:20},text_box:{backgroundColor:\"#f5f5f5\",color:\"#000\",borderRadius:10,height:45,padding:10,margin:10,fontSize:16,width:300},btncontainer:{display:\"flex\",flexDirection:\"row\",justifyContent:\"space-between\",width:300},Sign_in_btn:{backgroundColor:\"#a5a5a5\",height:50,width:130,margin:3,marginLeft:\"auto\",marginRight:\"auto\",borderRadius:15,display:\"flex\",justifyContent:\"center\",alignItems:\"center\"},btn_label:{fontWeight:\"bold\",fontSize:15,color:\"#fff\"}});","map":{"version":3,"names":["React","useState","AsyncStorage","Loading","AddCollection","showmodal","changeshowmodal","load_collections","navigation","name","name_chg","desc","desc_chg","storage_userid","getItem","console","log","load","load_chg","add_coll_submit","then","user_id","fetch","method","headers","Accept","body","JSON","stringify","description","id","response","json","res","message","data","collection_ids","catch","error","navigate","styles","modalcontainer","modalform","header","text_box","new_name","new_desc","btncontainer","Sign_in_btn","btn_label","StyleSheet","create","display","flexDirection","alignItems","marginTop","fontSize","backgroundColor","color","borderRadius","height","padding","margin","width","justifyContent","marginLeft","marginRight","fontWeight"],"sources":["/home/panda/Desktop/Clients/Jaja or Junior/android-expo-app/client/components/AddCollection.js"],"sourcesContent":["import {\n  StyleSheet,\n  Text,\n  View,\n  TextInput,\n  TouchableOpacity,\n  Modal,\n} from \"react-native\";\nimport { React, useState } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport Loading from \"../components/Loading\";\n\nexport default function AddCollection({\n  showmodal,\n  changeshowmodal,\n  load_collections,\n  navigation,\n}) {\n  const [name, name_chg] = useState(\"\");\n  const [desc, desc_chg] = useState(\"\");\n  const storage_userid = async () => {\n    try {\n      return await AsyncStorage.getItem(\"@user_id\");\n    } catch (e) {\n      console.log(e);\n      return null;\n    }\n  };\n  const [load, load_chg] = useState(false);\n\n  const add_coll_submit = async (name, desc, navigation) => {\n    load_chg(true);\n    storage_userid().then(async (user_id) => {\n      await fetch(\"http://192.168.0.158:3000/collection/\", {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          name: name,\n          description: desc,\n          id: user_id,\n        }),\n      })\n        .then(async (response) => {\n          let res = await response.json();\n          if (res.message == \"Success\") {\n            name_chg(\"\");\n            desc_chg(\"\");\n            load_collections(res.data.collection_ids);\n            changeshowmodal(false);\n            load_chg(false);\n          } else if (res.message == \"Fail\") {\n            console.log(\"Fail\");\n            load_chg(false);\n          }\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    });\n    navigation.navigate(\"Dashboard\");\n  };\n  return (\n    <Modal\n      style={styles.modalcontainer}\n      animationType=\"slide\"\n      visible={showmodal}\n    >\n      {load == true ? <Loading /> : null}\n      <View style={styles.modalform}>\n        <Text style={styles.header}>Add Collection</Text>\n        <TextInput\n          style={styles.text_box}\n          placeholder=\"Collection name\"\n          defaultValue={name}\n          onChangeText={(new_name) => name_chg(new_name)}\n        />\n        <TextInput\n          style={styles.text_box}\n          defaultValue={desc}\n          onChangeText={(new_desc) => desc_chg(new_desc)}\n          placeholder=\"Collection description\"\n        />\n        <View style={styles.btncontainer}>\n          <TouchableOpacity\n            style={styles.Sign_in_btn}\n            onPress={() => changeshowmodal(false)}\n          >\n            <Text style={styles.btn_label}>Cancel</Text>\n          </TouchableOpacity>\n          <TouchableOpacity\n            style={styles.Sign_in_btn}\n            onPress={() => add_coll_submit(name, desc, navigation)}\n          >\n            <Text style={styles.btn_label}>Add</Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    </Modal>\n  );\n}\n\nconst styles = StyleSheet.create({\n  modalcontainer: {},\n  modalform: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    marginTop: 250,\n  },\n  header: {\n    fontSize: 20,\n  },\n  text_box: {\n    backgroundColor: \"#f5f5f5\",\n    color: \"#000\",\n    borderRadius: 10,\n    height: 45,\n    padding: 10,\n    margin: 10,\n    fontSize: 16,\n    width: 300,\n  },\n  btncontainer: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    width: 300,\n  },\n  Sign_in_btn: {\n    backgroundColor: \"#a5a5a5\",\n    height: 50,\n    width: 130,\n    margin: 3,\n    marginLeft: \"auto\",\n    marginRight: \"auto\",\n    borderRadius: 15,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  btn_label: {\n    fontWeight: \"bold\",\n    fontSize: 15,\n    color: \"#fff\",\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}